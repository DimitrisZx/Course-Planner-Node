{"version":3,"sources":["components/mainView/styles.js","utils.js","features/store/stateSlice.js","components/mainView/components/LessonCard.js","components/mainView/components/TopPart/styles.js","components/mainView/components/TopPart/index.js","components/mainView/components/TopPart/topPart.js","components/mainView/components/styles.js","components/mainView/components/BottomPartv3.js","components/mainView/mainView.js","components/mainView/index.js","components/sidebar/styles.js","components/sidebar/index.js","components/sidebar/sidebar.js","components/loginForm/formFields.js","components/loginForm/dropdown.js","components/loginForm/loginForm.js","components/loginForm/index.js","useNetwork.js","components/topBar/index.js","components/topBar/topBar.js","components/editProfileForm/formFields.js","components/editProfileForm/index.js","components/editProfileForm/editProfileForm.js","components/adminPanel/adminPanel.js","components/editSelectedLessons/index.js","components/editSelectedLessons/editSelectedLessons.js","privateRoute.js","App.js","app/store.js","serviceWorker.js","index.js"],"names":["useStyle","createUseStyles","mainView","width","display","flexDirection","alignItems","margin","marginTop","viewPart","height","buttons","lessonDays","not","bool","repeatX","times","timesArr","length","fill","validators","name","n","console","log","test","rn","semester","email","password","addExtraZero","num","baseUrl","headers","method","data","mode","cache","credentials","redirect","referrerPolicy","body","JSON","stringify","uploadFile","file","a","formData","FormData","append","config","axios","post","updateSchedule","createAsyncThunk","payload","thunkAPI","userId","selectedLessons","fetch","response","json","parsed","getLessonsAsync","URL","uuid","schoolCode","updateRegisteredLessonsAsync","requestSignUp","registryNumber","history","success","push","errorMsg","getSchoolNames","requestLogin","getSavedSelectedLessons","requestProfileEdit","localId","stateSlice","createSlice","initialState","loggedIn","user","currentSemester","sessionExpiresIn","isAdmin","registeredLessons","tableValues","map","lday","range","hourRange","hours","_range","hour","writes","lessons","day","asyncLessons","lessonNames","filesToUpload","availableSchoolNames","errors","reducers","updateRegisteredLessons","state","addLesson","lesson","addFileToUpload","removeLesson","filter","item","editSchedule","newTableValues","loginSuccess","logout","AM","clearLocalSchedule","clearErrors","extraReducers","fulfilled","expiresIn","userType","actions","selectUser","selectLessons","selectTableValues","selectSelectedLessons","selectRegisteredLessons","selectIsLoggedIn","selectIsAdmin","selectLocalId","selectLessonNames","selectAvailableSchoolNames","selectErrors","LessonCard","type","useSelector","dispatch","useDispatch","isSelected","some","handleClick","lessonHours","lessonDay","lName","localTableValues","cloneDeep","hoursRangeToModify","find","forEach","lessonHour","hourToUpdate","includes","flat","lessonIndex","indexOf","splice","tableValuesPayload","isEmpty","buttonClasses","lessonSemester","selected","semesterColor","className","style","position","days","hourSet","idx","key","onClick","constructObjectToSubmit","slice","id","lessonList","caret","cursor","TopPart","useState","oldSemestersHidden","setOldSemestersHidden","currentSemesterHidden","setCurrentSemesterHidden","currentSemesterLessons","prevSemesterLessons","noRegisteredLessons","classes","role","aria-label","index","theoryColor","theader","top","lessonNamesReducer","acc","cur","lessonsList","array","shouldAddComma","Hour","hourValue","hourColor","lessonsInHour","this","DayRowComponent","dayName","availableHours","lessonsOfThisDay","groupBy","dayHours","_","conflictingLessonsList","green","yellow","red","white","conflictinglesson","markDuplicates","findConflictingLessons","scope","dayHour","reduce","BottomPartv3","class","lessonsInDay","MainView","selectedlessons","useHistory","useEffect","isMobile","window","matchMedia","matches","sidebar","sidebarContent","textAlign","Sidebar","label","value","Dropdown","namesList","setterFunction","selectedItem","setSelectedItem","showDropDown","setShowDropDown","handleMenu","addEventListener","removeEventListener","aria-haspopup","aria-expanded","textOverflow","whiteSpace","overflow","e","handleItemClick","LoginForm","setEmail","setPassword","setName","setRn","setSemester","isLogin","setIsLogin","setSchoolCode","fieldStates","userLoggedIn","schoolsMap","schoolNames","obj","schoolName","isOffline","navigator","onLine","isOnline","setNetwork","updateNetwork","useNetwork","handleChange","target","handleClear","preventDefault","userNamePasswordFilled","allFieldsFilled","mainButtonColor","fields","field","htmlFor","disabled","onChange","code","fn","handleSetLogin","error","TopBar","isLoggedIn","to","data-toggle","data-target","aria-controls","href","EditProfileForm","formFields","setFormFields","validForm","Object","values","every","AdminPanel","fileToUpload","setFileToUpload","alert","files","EditSelectedLessons","lessonsNames","sort","usersLessons","setUsersLessons","userUuid","lessonName","isChecked","checked","updateUsersLessons","PrivateRoute","children","rest","render","props","App","exact","path","configureStore","reducer","stateReducer","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","StrictMode","store","document","getElementById","process","origin","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.8e8fff36.chunk.js","sourcesContent":["import { createUseStyles } from 'react-jss';\r\n\r\nconst useStyle = createUseStyles({\r\n  mainView: {\r\n    width: '80%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    // background: '#fff',\r\n    margin: '0 auto',\r\n    marginTop: '25px'\r\n  },\r\n  viewPart: {\r\n    width: '100%',\r\n    height: '50%',\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n  }\r\n});\r\n\r\nexport default useStyle;","import { range as _range } from 'lodash';\r\n\r\nconst lessonDays = ['Δευτέρα', 'Τρίτη', 'Τετάρτη', 'Πέμπτη', 'Παρασκευή'];\r\nconst firstLessonHour = 8;\r\n\r\nconst not = bool => !bool;\r\nfunction repeatX(times) {\r\n  const timesArr = [];\r\n  timesArr.length = times;\r\n  timesArr.fill(0);\r\n  return timesArr;\r\n}\r\n\r\nconst validators = {\r\n  name: (n) => {\r\n    const regex = /^\\p{Lu}\\p{Ll}+( \\p{Lu}\\p{Ll}+)*$/;\r\n    console.log(regex.test(n))\r\n    console.log(n)\r\n  },\r\n  rn: () => {},\r\n  semester: () => {},\r\n  email: () => {},\r\n  password: () => {},\r\n}\r\n\r\n// add extra zero to beginning of time string e.g. 8:00 => 08:00\r\nconst addExtraZero = num => num < 10 ? '0' : '';\r\n\r\nconst day = (name, range) => {\r\n  const hours = hourRange => _range(hourRange[0], hourRange[1]).map(num => ({ hour: num, writes: 0, lessons: [] }))\r\n  return { name, hours: hours(range) };\r\n}\r\n\r\n// Generates the time-table model | Used in redux-store \r\nconst genDaysTable = () => lessonDays.map(lday => day(lday, [8, 22]));\r\n\r\nexport {\r\n  not,\r\n  repeatX,\r\n  addExtraZero,\r\n  genDaysTable,\r\n  lessonDays,\r\n  firstLessonHour,\r\n  validators,\r\n};","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { genDaysTable } from 'utils';\r\nimport axios from 'axios';\r\n\r\nconst baseUrl = 'http://localhost:5000/';\r\nconst headers = (method, data = {}) => ({\r\n  method, // *GET, POST, PUT, DELETE, etc.\r\n  mode: 'cors', // no-cors, *cors, same-origin\r\n  cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n  credentials: 'same-origin', // include, *same-origin, omit\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Access-Control-Allow-Origin': 'http://localhost:5000',\r\n    'Access-Control-Allow-Credentials': 'true'\r\n  },\r\n  redirect: 'follow', // manual, *follow, error\r\n  referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\r\n  body: JSON.stringify(data),\r\n});\r\n\r\nexport async function uploadFile(file) {\r\n  const URL = baseUrl + 'uploadSchedule';\r\n  const formData = new FormData();\r\n  console.log(file)\r\n  formData.append(\"myfile\", file);\r\n  const config = {\r\n    headers: {\r\n      'content-type': 'multipart/form-data'\r\n    }\r\n  }\r\n  await axios.post(URL, formData, config)\r\n} \r\n\r\nexport const updateSchedule = createAsyncThunk(\r\n  'app/updateSchedule',\r\n  async (payload, thunkAPI) => {\r\n    const URL = baseUrl + 'updateSchedule';\r\n    // const { lessonSchedule } = payload;\r\n    console.log(payload)\r\n    const {userId, selectedLessons} = payload;\r\n    const response = await fetch(URL, headers('POST',  payload));\r\n    const parsed = await response.json();\r\n    return parsed;\r\n  }\r\n)\r\n\r\nexport const getLessonsAsync = createAsyncThunk(\r\n  'app/fetchLessons',\r\n  async (payload, thunkAPI) => {\r\n    // const URL = baseUrl + 'lessons?uuid=\"' + payload.uuid;\r\n    const URL = `${baseUrl}lessons?uuid=${payload.uuid}&schoolCode=${payload.schoolCode}&semester=${payload.semester}`;\r\n    const response = await fetch(URL);\r\n    const parsed = await response.json();\r\n    return parsed;\r\n  }\r\n)\r\n\r\nexport const updateRegisteredLessonsAsync = createAsyncThunk(\r\n  'app/updateRegisteredLessons',\r\n  async (payload, thunkAPI) => {\r\n    const URL = baseUrl + 'updateRegisteredLessons';\r\n    const response = await fetch(URL, headers('POST', payload));\r\n    const parsed = await response.json()\r\n    console.log(parsed);\r\n    return parsed;\r\n  }\r\n)\r\n\r\nexport const requestSignUp = createAsyncThunk(\r\n  'app/requestSignUp',\r\n  async (payload, thunkAPI) => {\r\n    const { email, password, name, registryNumber, semester, history, schoolCode } = payload;\r\n    const URL = baseUrl + 'requestSignUp';\r\n    const response = await fetch(URL, headers('POST', {email, password, name, registryNumber, semester, schoolCode}));\r\n    const parsed = await response.json();\r\n    if (parsed.success) {\r\n      history.push('/my-schedule')\r\n    } else {\r\n      console.log(parsed.errorMsg)\r\n    }\r\n    console.log(parsed)\r\n    return parsed;\r\n  }\r\n)\r\n\r\nexport const getSchoolNames = createAsyncThunk(\r\n  'app/getAvailableSchools',\r\n  async (payload, thunkAPI) => {\r\n    const URL = baseUrl + 'getAvailableSchools';\r\n    const response = await fetch(URL, headers('POST', {}));\r\n    const parsed = await response.json();\r\n    return parsed;\r\n  }\r\n)\r\n\r\nexport const requestLogin = createAsyncThunk(\r\n  'app/requestLogin',\r\n  async (payload, thunkAPI) => {\r\n    const { email, password, history } = payload;\r\n    const URL = baseUrl + 'requestLogin';\r\n    const response = await fetch(URL, headers('POST',  {email, password}));\r\n    const parsed = await response.json();\r\n    if (parsed.success) {\r\n      history.push('/my-schedule')\r\n    } else {\r\n      console.log(parsed.errorMsg)\r\n    }\r\n    return parsed\r\n  }\r\n)\r\n\r\nexport const getSavedSelectedLessons = createAsyncThunk(\r\n  'app/getSavedSelectedLessons',\r\n  async (payload, thunkAPI) => {\r\n    const { rn } = payload;\r\n    const URL = baseUrl + 'getSavedSelectedLessons';\r\n    const response = await fetch(URL, {...headers('POST', {rn})})\r\n  }\r\n);\r\nexport const requestProfileEdit = createAsyncThunk(\r\n  'app/requestProfileEdit',\r\n  async (payload, thunkAPI) => {\r\n    const {name, rn, semester, localId} = payload;\r\n    console.log(localId)\r\n    const URL = baseUrl + 'requestProfileEdit';\r\n    const response = await fetch(URL, {...headers('POST', {name, rn, semester, localId})})\r\n    const parsed = await response.json();\r\n    if (parsed.success) {\r\n      // history.push('/my-schedule')\r\n    } else {\r\n      console.log(parsed.errorMsg)\r\n    }\r\n    return parsed\r\n  }\r\n);\r\n\r\n// export const updateLessonsAsync = createAsyncThunk(\r\n//   'app/updateLessonsAsync',\r\n//   async (_, thunkAPI) => {\r\n//     const URL = baseUrl + 'updateSelectedLessons';\r\n//     const response = await fetch(URL, { ...headers('POST', { msg: 'yo' }) });\r\n//   }\r\n// )\r\n\r\nexport const stateSlice = createSlice({\r\n  name: 'state',\r\n\r\n  initialState: {\r\n    loggedIn: false,\r\n    user: {\r\n      localId: '',\r\n      currentSemester: '',\r\n      name: ' ',\r\n      registryNumber: '',\r\n      sessionExpiresIn: 0,\r\n      email: '',\r\n      isAdmin: false\r\n    },\r\n    registeredLessons: [],\r\n    selectedLessons: [],\r\n    tableValues: genDaysTable(5, 13),\r\n    asyncLessons: [],\r\n    lessonNames: [],\r\n    filesToUpload: [],\r\n    availableSchoolNames: [],\r\n    errors: [],\r\n  },\r\n  reducers: {\r\n    updateRegisteredLessons: (state, payload) => {\r\n      state.registeredLessons = payload.payload;\r\n    },\r\n    addLesson: (state, lesson) => {\r\n      state.selectedLessons.push(lesson.payload);\r\n    },\r\n    addFileToUpload: (state, payload) => {\r\n      state.filesToUpload.push(payload.payload)\r\n    },\r\n    removeLesson: (state, lesson) => {\r\n      state.selectedLessons = state.selectedLessons.filter(item => item.name !== lesson.payload.name)\r\n    },\r\n    editSchedule: (state, payload) => {\r\n      state.tableValues = payload.payload.newTableValues;\r\n    },\r\n    loginSuccess: (state, payload) => {\r\n      console.log(payload)\r\n      state.sessionExpiresIn = payload.sessionExpiresIn;\r\n      state.email = payload.email;\r\n    },\r\n    logout: state => {\r\n      state.loggedIn = false;\r\n      state.user = {\r\n        currentSemester: '0',\r\n        name: '',\r\n        AM: '',\r\n        sessionExpiresIn: 0,\r\n        email: '',\r\n        uuid: ''\r\n      };\r\n    },\r\n    clearLocalSchedule: state => {\r\n      state.selectedLessons = []\r\n    },\r\n    clearErrors: state => {\r\n      state.errors = []\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [getLessonsAsync.fulfilled]: (state, { payload }) => {\r\n      state.asyncLessons = [...payload.lessons]\r\n      state.lessonNames = payload.lessonNames;\r\n    },\r\n    [requestLogin.fulfilled]: (state, { payload }) => {\r\n\r\n      const { email, expiresIn, localId, userType } = payload.payload;\r\n      state.loggedIn = true;\r\n      state.user.email = email;\r\n      state.user.sessionExpiresIn = expiresIn;\r\n      state.user.localId = localId;\r\n      state.user.name = payload.payload.name;\r\n      state.user.currentSemester = payload.payload.semester;\r\n      state.user.registryNumber = payload.payload.registryNumber;\r\n      state.user.uuid = payload.payload.uuid;\r\n      state.selectedLessons = [...payload.payload.selectedLessons];\r\n      state.registeredLessons = [...payload.payload.registeredLessons];\r\n      state.user.isAdmin = userType === 'admin';\r\n      state.user.schoolCode = payload.payload.schoolCode\r\n    },\r\n    [requestSignUp.fulfilled]: (state, { payload }) => {\r\n      console.log(payload)\r\n      if (payload?.payload?.errorMsg) { \r\n        state.errors.push(payload?.payload?.errorMsg)\r\n        return;\r\n      }\r\n      state.user.localId = payload.payload.localId;\r\n      state.loggedIn = true;\r\n      state.user.email = payload.payload.email;\r\n      state.user.name = payload.payload.name;\r\n      state.user.currentSemester = payload.payload.semester;\r\n      state.user.registryNumber = payload.payload.registryNumber;\r\n      state.user.uuid = payload.payload.uuid;\r\n    },\r\n    [getSavedSelectedLessons]: (state, { payload }) => {\r\n      state.selectedLessons = payload.payload.selectedLessons;\r\n    },\r\n    [updateRegisteredLessonsAsync.fulfilled]: (state, {payload}) => {\r\n      state.registeredLessons = [...payload.payload];\r\n    },\r\n    [getSchoolNames.fulfilled]: (state, {payload}) => {\r\n      state.availableSchoolNames = [...payload];\r\n    }\r\n  }\r\n});\r\n\r\nexport const {\r\n  addLesson,\r\n  removeLesson,\r\n  editSchedule,\r\n  loginSuccess,\r\n  logout,\r\n  clearLocalSchedule,\r\n  updateRegisteredLessons,\r\n  addFileToUpload,\r\n  clearErrors\r\n} = stateSlice.actions;\r\n\r\n// The function below is called a thunk and allows us to perform async logic. It\r\n// can be dispatched like a regular action: `dispatch(incrementAsync(10))`. This\r\n// will call the thunk with the `dispatch` function as the first argument. Async\r\n// code can then be executed and other actions can be dispatched\r\nexport const incrementAsync = amount => dispatch => {\r\n  setTimeout(() => {\r\n    // dispatch(incrementByAmount(amount));\r\n  }, 1000);\r\n};\r\n\r\nexport const selectUser = state => state.state.user;\r\nexport const selectLessons = state => state.state.asyncLessons;\r\nexport const selectTableValues = state => state.state.tableValues;\r\nexport const selectSelectedLessons = state => state.state.selectedLessons;\r\nexport const selectRegisteredLessons = state => state.state.registeredLessons;\r\nexport const selectIsLoggedIn = state => state.state.loggedIn;\r\nexport const selectIsAdmin = state => state.state.user.isAdmin;\r\nexport const selectLocalId = state => state.state.user.localId;\r\nexport const selectLessonNames = state => state.state.lessonNames;\r\nexport const selectFilesToUpload = state => state.state.filesToUpload;\r\nexport const selectAvailableSchoolNames = state => state.state.availableSchoolNames;\r\nexport const selectSchoolCode = state => state.state.user.schoolCode;\r\nexport const selectErrors = state => state.state.errors;\r\nexport default stateSlice.reducer;\r\n","import React from 'react';\r\nimport {\r\n  addLesson, removeLesson, selectSelectedLessons, selectUser, selectTableValues, editSchedule\r\n} from 'features/store/stateSlice';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { not } from 'utils';\r\nimport { range, cloneDeep, isEmpty } from 'lodash';\r\n\r\n\r\nconst LessonCard = ({ lesson }) => {\r\n  const { name, semester, type } = lesson;\r\n  const selectedLessons = useSelector(selectSelectedLessons);\r\n  const { currentSemester } = useSelector(selectUser);\r\n  const tableValues = useSelector(selectTableValues)\r\n  const dispatch = useDispatch();\r\n\r\n  const isSelected = selectedLessons.some(lesson => lesson.name === name);\r\n\r\n  const handleClick = lesson => {\r\n    const { hours: lessonHours, day: lessonDay, name: lName, type } = lesson;\r\n    const localTableValues = cloneDeep(tableValues);\r\n    const { hours: hoursRangeToModify } = localTableValues.find(day => day.name === lessonDay)\r\n\r\n    const hourValuesToUpdate = range(lessonHours[0], lessonHours[1]);\r\n    hourValuesToUpdate.forEach(lessonHour => {\r\n      const hourToUpdate = hoursRangeToModify.find(({ hour }) => hour === lessonHour);\r\n      if (isSelected) {\r\n        if (type === 'workshop') {\r\n          const hoursThatHadThisWorkshop = localTableValues.map(day => day.hours.filter(hour => hour.lessons.includes(lName))).flat();\r\n          hoursThatHadThisWorkshop.forEach(hour => {\r\n            hour.writes -= 1;\r\n            const lessonIndex = hour.lessons.indexOf(lName);\r\n            hour.lessons.splice(lessonIndex, 1)\r\n          })\r\n\r\n        } else if (type === 'theory') {\r\n          hourToUpdate.writes -= 1;\r\n          const lessonIndex = hourToUpdate.lessons.indexOf(lName);\r\n          hourToUpdate.lessons.splice(lessonIndex, 1)\r\n        }\r\n      } else { // not selected\r\n        if (type === 'workshop') {\r\n          hourToUpdate.writes += 1;\r\n          hourToUpdate.lessons.push(lName);\r\n        } else if (type === 'theory') {\r\n          hourToUpdate.writes += 1;\r\n          hourToUpdate.lessons.push(lName);\r\n        }\r\n      }\r\n    })\r\n\r\n    const tableValuesPayload = { newTableValues: localTableValues }\r\n\r\n    not(isSelected) || isEmpty(selectedLessons)\r\n      ? dispatch(addLesson({ ...lesson }))\r\n      : dispatch(removeLesson({ ...lesson }));\r\n\r\n    dispatch(editSchedule(tableValuesPayload))\r\n  };\r\n\r\n  // Generate the relevant style classes for each button\r\n  const buttonClasses = (isSelected, lessonSemester) => {\r\n    const selected = not(isSelected) ? '-outline' : ''\r\n    const semesterColor = lessonSemester === currentSemester ? 'success' : 'secondary';\r\n    return `btn btn${selected}-${semesterColor} mr-2`;\r\n  }\r\n\r\n  const constructObjectToSubmit = (lesson, hourSet, type, day) => ({\r\n    name: lesson.name,\r\n    semester: lesson.semester,\r\n    hours: hourSet,\r\n    type: type,\r\n    day: day.day\r\n  });\r\n\r\n  return (\r\n    <span className='btn-container' style={{ position: 'relative' }}>\r\n      {type === 'workshop'\r\n        ? lesson.days.map(day =>\r\n          day.hours.map((hourSet, idx) =>\r\n            <button\r\n              key={idx}\r\n              onClick={() => handleClick(constructObjectToSubmit(lesson, hourSet, 'workshop', day))}\r\n              className={buttonClasses(isSelected, semester, type)}>\r\n              {name} | {day.day.slice(0, 3)} {`${day.hours[0][0]}:00-${day.hours[0][1]}:00`}\r\n            </button>\r\n          )\r\n        )\r\n        :\r\n        <button\r\n          className={buttonClasses(isSelected, semester, type)}\r\n          onClick={() => handleClick(lesson)}\r\n          id={`lesson-${name}-${type}`}\r\n          type={'button'}\r\n        >{name}</button>\r\n      }\r\n    </span>\r\n  )\r\n}\r\n\r\nexport default LessonCard\r\n\r\n\r\n/*\r\n  red - direct conflict, (writes > 1)\r\n  orange - one of its hours has conflict, (writes === 1 && writes === 2 στα γειτονικά)\r\n  green - no conflict (writes === 1)\r\n\r\n  theory = light green\r\n  workshop = green\r\n\r\n  OK borders σε κάθε μάθημα\r\n  OK εργαστήρια σε ξεχωριστά κουμπιά\r\n\r\n  OK mock http request to get store data\r\n*/","import { createUseStyles } from 'react-jss';\r\n\r\nconst useStyle = createUseStyles({\r\n  lessonList: {\r\n    // '&:first-child': {\r\n    //   marginRight: '20px',\r\n    //   paddingRight: '20px',\r\n    //   borderRight: '1px solid grey',\r\n    // }\r\n  },\r\n  caret: {\r\n    cursor: 'pointer'\r\n  }\r\n});\r\n\r\nexport default useStyle;","import TopPart from './topPart';\r\nexport default TopPart;","import React, {useState} from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectLessons, selectUser } from 'features/store/stateSlice';\r\nimport LessonCard from '../LessonCard';\r\nimport useStyle from './styles';\r\n\r\nimport { AiFillCaretDown, AiFillCaretRight } from 'react-icons/ai'\r\n\r\nconst TopPart = () => {\r\n  const [oldSemestersHidden, setOldSemestersHidden] = useState(false)\r\n  const [currentSemesterHidden, setCurrentSemesterHidden] = useState(true)\r\n  const lessons = useSelector(selectLessons);\r\n  const { currentSemester } = useSelector(selectUser);\r\n  \r\n  const currentSemesterLessons = lessons.filter(lesson => lesson.semester === +currentSemester)\r\n  const prevSemesterLessons = lessons.filter(lesson => lesson.semester !== +currentSemester)\r\n  \r\n  const noRegisteredLessons = lessons.length === 0;\r\n\r\n  const classes = useStyle();\r\n\r\n  return (\r\n    <div\r\n      className={'card shadow-sm'}\r\n      style={{ width: '100%' }}\r\n    >\r\n      <div className={`card-body ${noRegisteredLessons ? 'no-lessons' : ''}`}>\r\n        {noRegisteredLessons \r\n          ? \r\n            <>\r\n              <h4><span role='img' aria-label='sad-emoji'>😢</span> Δεν βρέθηκαν επιλεγμένα μαθήματα</h4>\r\n              <hr></hr>\r\n              <p><span role='img' aria-label='lamp-emoji'>💡</span> Παρακαλώ επιλέξτε μαθήματα από την ενότητα \"Επιλεγμένα Μαθήματα\"</p>\r\n            </>\r\n          : \r\n            <>\r\n              <div className={classes.lessonList} id={'current-semester'}>\r\n                <h5>\r\n                  <span className={classes.caret}onClick={() => setCurrentSemesterHidden(!currentSemesterHidden)}>\r\n                    {currentSemesterHidden ? <AiFillCaretDown /> : <AiFillCaretRight />}\r\n                  </span>\r\n                  {' Μαθημάτα Τρέχοντος Εξαμήνου'}\r\n                </h5>\r\n                {currentSemesterHidden && <>\r\n                  <h6>Θεωρίες:</h6> \r\n                  {currentSemesterLessons.filter(lesson => lesson.type === 'theory').map((lesson, index) => <LessonCard key={index} lesson={lesson} />)}\r\n                  <br />\r\n                  <br />\r\n                  <h6>Εργαστήρια:</h6> \r\n                  {currentSemesterLessons.filter(lesson => lesson.type === 'workshop').map((lesson, index) => <LessonCard key={index} lesson={lesson} />)}\r\n                </>}\r\n              </div>\r\n              <hr/>\r\n              <div className={classes.lessonList} id={'prev-semesters'}>\r\n                <h5>\r\n                  <span className={classes.caret}onClick={() => setOldSemestersHidden(!oldSemestersHidden)}>\r\n                    {oldSemestersHidden ? <AiFillCaretDown /> : <AiFillCaretRight />}\r\n                  </span>\r\n                  {' Μαθημάτα Προηγούμενων Εξαμήνων'}\r\n                </h5>\r\n          \r\n                { oldSemestersHidden && <>\r\n                  <h6>Θεωρίες:</h6>  \r\n                    {prevSemesterLessons.filter(lesson => lesson.type === 'theory').map((lesson, index) => <LessonCard key={index} lesson={lesson} />)}\r\n                    <br />\r\n                    <br />\r\n                    <h6>Εργαστήρια:</h6>\r\n                    {prevSemesterLessons.filter(lesson => lesson.type === 'workshop').map((lesson, index) => <LessonCard key={index} lesson={lesson} />)}\r\n                </>}\r\n              </div>\r\n            </>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TopPart; \r\n","import { createUseStyles } from 'react-jss';\r\n\r\nconst useStyle = createUseStyles({\r\n  theoryColor: {\r\n    // background: '#36d65a !important'\r\n  },\r\n  theader: {\r\n    position: 'sticky',\r\n    top: '0',\r\n  }\r\n});\r\n\r\nexport default useStyle;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectSelectedLessons } from 'features/store/stateSlice';\r\nimport { repeatX, addExtraZero, lessonDays, firstLessonHour } from 'utils';\r\nimport { groupBy, range } from 'lodash';\r\n\r\nconst shouldAddComma = (index, array) => index !== array.length - 1 ? ', ' : '';\r\nconst lessonNamesReducer = (acc, cur, index, lessonsList) => `${acc}${cur}${shouldAddComma(index, lessonsList)}`\r\n\r\n\r\nclass Hour {\r\n  hourValue;\r\n  hourColor = 'white';\r\n  lessonsInHour = [];\r\n  constructor(hourValue) { this.hourValue = hourValue+''}\r\n}\r\n\r\nconst DayRowComponent = ({ dayName, availableHours }) => {\r\n  const selectedLessons = useSelector(selectSelectedLessons);\r\n  const lessonsOfThisDay = groupBy(selectedLessons, 'day')[dayName];\r\n\r\n  let dayHours = repeatX(availableHours).map((_, index) => new Hour(index + firstLessonHour)); \r\n  if(lessonsOfThisDay) {\r\n    const hours = repeatX(availableHours).map((_, index) => new Hour(index + firstLessonHour))\r\n    hours.forEach(hour => {\r\n      lessonsOfThisDay.forEach(lesson => {\r\n        if (range(lesson.hours[0], lesson.hours[1]).includes(+hour.hourValue)){\r\n          hour.lessonsInHour.push(lesson.name)\r\n        }\r\n      })\r\n    })\r\n    const conflictingLessonsList = findConflictingLessons(hours)\r\n    dayHours = markDuplicates(conflictingLessonsList, hours)\r\n  }\r\n\r\n  return (\r\n    <tr className=\"bg-white\">\r\n      <th scope='row' className=\"tside-header\">{dayName}</th>\r\n      {\r\n        dayHours.map((dayHour, idx) => {\r\n          const lessonNames = dayHour.lessonsInHour.reduce(lessonNamesReducer, ``);\r\n          return <td className={`bg-${dayHour.hourColor || 'd5y'} text-small border text-light `} key={idx}>\r\n            {lessonNames}\r\n          </td>\r\n        })\r\n      }\r\n    </tr >\r\n  );\r\n}\r\n\r\nconst genHours = times => {\r\n  const arrayToReturn = repeatX(times).map((_, index) =>\r\n    <th className={'theader bg-white border-bottom'} key={index} scope={'col'}>{`${addExtraZero((index + 8))}${index + 8}:00`}</th>)\r\n  return arrayToReturn;\r\n}\r\n\r\nexport function BottomPartv3() {\r\n  const selectedLessons = useSelector(selectSelectedLessons);\r\n\r\n  return (\r\n    <div class=\"table-responsive\">\r\n    <table className=\"table mt-3 border shadow-sm\">\r\n      <thead className=\"border bg-white rounded\">\r\n        <tr className=\"\">\r\n          <th scope=\"col\" className=\"theader border-bottom\">{''}</th>\r\n          {genHours(14)}\r\n        </tr>\r\n      </thead>\r\n      <tbody className=\"\">\r\n        {\r\n          lessonDays.map((day, index) => {\r\n            const lessonsInDay = selectedLessons.filter(lesson => lesson.day === day)\r\n            return <DayRowComponent\r\n              key={index}\r\n              dayName={day}\r\n              lessonsInDay={lessonsInDay}\r\n              availableHours={14}\r\n            />\r\n          }\r\n          )\r\n        }\r\n      </tbody>\r\n    </table>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction findConflictingLessons(hours) {\r\n  const conflictingLessonsList = [];\r\n  hours.forEach(hour => {\r\n    if (hour.lessonsInHour.length > 1) {\r\n      conflictingLessonsList.push(...hour.lessonsInHour.filter(lesson => !conflictingLessonsList.includes(lesson)))\r\n    }\r\n  })\r\n  return conflictingLessonsList;\r\n}\r\n\r\nfunction markDuplicates(conflictingLessonsList, dayHours) {\r\n  const { green, yellow, red, white } = {green:'success', yellow:'warning', red:'danger', white:'light'};\r\n  dayHours.forEach(hour => {\r\n    hour.hourColor = hour.lessonsInHour.length === 0 ? white : green;\r\n    conflictingLessonsList.forEach(conflictinglesson => {\r\n      if(hour.lessonsInHour.includes(conflictinglesson)) {\r\n        if (hour.lessonsInHour.length <= 1) {\r\n          hour.hourColor = yellow;\r\n        } else if (hour.lessonsInHour.length > 1) {\r\n          hour.hourColor = red;\r\n        } \r\n      } \r\n    })\r\n  })\r\n  return dayHours;\r\n}","import React, { useEffect } from 'react';\r\nimport useStyle from './styles';\r\nimport { TopPart, BottomPartv3 } from './components';\r\nimport {\r\n  getLessonsAsync,\r\n  updateSchedule,\r\n  selectSelectedLessons,\r\n  selectUser,\r\n  clearLocalSchedule\r\n} from 'features/store/stateSlice';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst MainView = () => {\r\n  const classes = useStyle();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const selectedlessons = useSelector(selectSelectedLessons);\r\n  const user = useSelector(selectUser)\r\n  useEffect(() => { dispatch(getLessonsAsync({uuid: user.uuid, semester: 'springSemester', schoolCode: user.schoolCode})) }, []);\r\n  const isMobile = window.matchMedia('(max-width: 450px)').matches;\r\n  const handleSaveSchedule = () => {\r\n    const payload = {userId: user.registryNumber, selectedlessons}\r\n    dispatch(updateSchedule(payload))\r\n  }\r\n\r\n  const handleClearSchedule = () => {\r\n    dispatch(updateSchedule({userId: user.registryNumber, selectedlessons:[]}))\r\n    dispatch(clearLocalSchedule())\r\n  }\r\n\r\n  return (\r\n    <div className={classes.mainView}>\r\n      {!isMobile && <TopPart />}\r\n      <BottomPartv3 />\r\n      <div className=\"buttons d-flex justify-content-end\">\r\n        <button className={'btn btn-primary shadow-sm'} onClick={handleSaveSchedule}>Αποθήκευση</button>\r\n        <button className={'btn btn-danger ml-2 shadow-sm'} onClick={handleClearSchedule}>Καθαρισμός</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MainView","import MainView from './mainView';\r\nexport default MainView;","import { createUseStyles } from 'react-jss';\r\n\r\nconst useStyle = createUseStyles({\r\n  sidebar: {\r\n    width: '200px',\r\n    height: '100%',\r\n  },\r\n  sidebarContent: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    textAlign: 'center'\r\n  }\r\n});\r\n\r\nexport default useStyle;","import Sidebar from './sidebar';\r\nexport default Sidebar;","import React from 'react';\r\nimport useStyle from './styles';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectUser } from 'features/store/stateSlice';\r\n\r\nconst Sidebar = () => {\r\n  const classes = useStyle();\r\n  const { name, currentSemester, email, registryNumber } = useSelector(selectUser)\r\n  return (\r\n    <div className={`${classes.sidebar} card border rounded-0`}>\r\n      <div className={`${classes.sidebarContent} card-body`}>\r\n        <h5 className=\"card-title\">{name}</h5>\r\n        <h6 className=\"card-subtitle\">{registryNumber}</h6>\r\n        <hr />\r\n        <div className=\"card-text\">{'Εξάμηνο: ' + currentSemester+'o'}</div>\r\n        <h6 className=\"card-subtitle\">{email}</h6>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n","export default [\r\n  { label: 'Email', name: 'email', value: '', type: 'text' },\r\n  { label: 'Password', name: 'password', value: '', type: 'password' },\r\n  { label: 'Ονομα', name: 'name', value: '', type: 'text' },\r\n  { label: 'Αριθμός Μητρώου', name: 'registryNumber', value: '' , type: 'text' },\r\n  { label: 'Εξάμηνο', name: 'semester', value: '', type: 'text' },\r\n];","import React, { useState, useEffect } from 'react';\r\n\r\nexport default function Dropdown({ namesList, label, setterFunction }) {\r\n  const [selectedItem, setSelectedItem] = useState();\r\n  const [showDropDown, setShowDropDown] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleMenu = () => showDropDown && setShowDropDown(false);\r\n    window.addEventListener(\"click\", handleMenu);\r\n    return () => {\r\n      window.removeEventListener(\"click\", handleMenu);\r\n    };\r\n  }, [showDropDown]);\r\n\r\n  function handleMenuClick () {\r\n\r\n    if(namesList.length > 0) {\r\n      setShowDropDown(true)\r\n    }\r\n  }\r\n\r\n  function handleItemClick(e, name) {\r\n    setShowDropDown(false);\r\n    setSelectedItem(name);\r\n    setterFunction(name);\r\n  }\r\n  const dropDownStyles = {\r\n    textOverflow: \"ellipsis\",\r\n    width: \"250px\",\r\n    whiteSpace: \"nowrap\",\r\n    overflow: \"hidden\",\r\n  }\r\n  return (\r\n    <div className=\"dropdown show\">\r\n      <div \r\n        onClick={handleMenuClick} \r\n        className=\"btn btn-outline-primary dropdown-toggle\" \r\n        role=\"button\" \r\n        aria-haspopup=\"true\" \r\n        aria-expanded=\"false\"\r\n        style={dropDownStyles}\r\n      >\r\n        {selectedItem || label}\r\n      </div>\r\n\r\n      {showDropDown && <div className=\"dropdown-menu\" style={{display: 'block', cursor: 'pointer'}} id=\"schools-menu\">\r\n        {namesList.map((name, idx) => <div key={idx} onClick={e => handleItemClick(e,name)} className=\"dropdown-item\">{name}</div>)}\r\n      </div>}\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { requestLogin, requestSignUp, selectIsLoggedIn, selectAvailableSchoolNames, getSchoolNames, selectErrors, clearErrors } from '../../features/store/stateSlice'\r\nimport fields from './formFields';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Dropdown from './dropdown';\r\nimport { useNetwork } from '../../useNetwork';\r\n\r\nconst LoginForm = () => {\r\n  const history = useHistory();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [registryNumber, setRn] = useState(\"\");\r\n  const [semester, setSemester] = useState(\"\");\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [schoolCode, setSchoolCode] = useState(\"\");\r\n  const fieldStates = { email, password, name, registryNumber, semester };\r\n  const dispatch = useDispatch();\r\n  const userLoggedIn = useSelector(selectIsLoggedIn);\r\n  const schoolsMap = useSelector(selectAvailableSchoolNames)\r\n  const schoolNames = schoolsMap.map(obj => obj.schoolName);\r\n  const errors = useSelector(selectErrors);\r\n\r\n  const isOffline = !useNetwork();\r\n  console.log(isOffline)\r\n\r\n  if (userLoggedIn) history.push(\"/my-schedule\");\r\n  // dispatch(requestLogin({ email: 'myemail@eg.gr', password: '1234', history, registryNumber: '14024' }))\r\n  function handleClick(e) {\r\n    e.preventDefault();\r\n    if (!(email && password)) return;\r\n    console.log(email, password, name, registryNumber, semester, schoolCode)\r\n    if(isLogin) {\r\n      dispatch(requestLogin({ email, password, history, registryNumber }))\r\n    } else {\r\n      dispatch(requestSignUp({ email, password, name, registryNumber, semester, history, schoolCode }))\r\n    }\r\n  };\r\n  function mapSchooNameToCode(schoolName) {\r\n    \r\n    const code = schoolsMap.find(item => item['schoolName'] === schoolName ).schoolCode;\r\n    console.log(code)\r\n    \r\n    setSchoolCode(code);\r\n  }\r\n  function handleChange(e) {\r\n    switch (e.target.name) {\r\n      case \"email\":\r\n        setEmail(e.target.value);\r\n        break;\r\n      case \"password\":\r\n        setPassword(e.target.value);\r\n        break;\r\n      case \"name\":\r\n        setName(e.target.value);\r\n        break;\r\n      case \"registryNumber\":\r\n        setRn(e.target.value);\r\n        break;\r\n      case \"semester\":\r\n        setSemester(e.target.value);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  function handleClear(e) {\r\n    e.preventDefault();\r\n    dispatch(clearErrors())\r\n  }\r\n  function handleSetLogin(e, bool) {\r\n    e.preventDefault();\r\n    handleClear(e);\r\n    isLogin\r\n     ? [ setEmail, setPassword ].forEach(fn => fn(''))\r\n     : [ setEmail, setPassword, setName, setRn, setSemester ].forEach(fn => fn(\"\"))\r\n    setIsLogin(bool);\r\n    isLogin && dispatch( getSchoolNames() );\r\n  }\r\n  const filterLoginFields = field => isLogin ? [ \"password\", \"email\" ].includes(field.name) : true;\r\n  \r\n  const userNamePasswordFilled = !( email && password );\r\n  const allFieldsFilled = !( email && password && name && registryNumber && semester && schoolCode );\r\n  \r\n  const mainButtonColor =\r\n    isLogin\r\n      ? userNamePasswordFilled \r\n        ? 'light' \r\n        : 'success'\r\n      : allFieldsFilled \r\n        ? 'light' \r\n        : 'success';\r\n\r\n  return (\r\n    <div className='container'>\r\n      <div className=\"row d-flex justify-content-center mt-5\">\r\n        <div className={`col-md-6 bg-white shadow-sm border border-${mainButtonColor} pt-2 pb-3 rounded`}>\r\n          <form>\r\n            <h3 className=\"text-dark\">{isLogin ? 'Είσοδος' : 'Εγγραφή'}{isOffline && ' - Είστε εκτός σύνδεσης'}</h3>\r\n            <hr></hr>\r\n            {fields.filter(filterLoginFields).map(({ name, type, label, value }) =>\r\n              <div className=\"form-group\" key={name}>\r\n                <label htmlFor={name}>{label}</label>\r\n                <input\r\n                  disabled={isOffline}\r\n                  onChange={handleChange}\r\n                  value={fieldStates[name]}\r\n                  className=\"form-control\"\r\n                  type={type}\r\n                  name={name}\r\n                  id={name} />\r\n              </div>\r\n            )}\r\n            {!isLogin && <Dropdown namesList={schoolNames} label={\"Επιλογή Σχολής\"} setterFunction={mapSchooNameToCode} /> }\r\n            <div className=\"buttons d-flex justify-content-end mt-3\">\r\n              <button  \r\n                id={ isOffline && isLogin ? 'login' : 'sign-Up'} \r\n                disabled={\r\n                  !isOffline &&\r\n                  isLogin\r\n                    ? userNamePasswordFilled\r\n                    : allFieldsFilled\r\n                } \r\n                onClick={handleClick} \r\n                className={\r\n                  `btn btn-${mainButtonColor} cursor-pointer`}>{isLogin ? 'Σύνδεση' : 'Εγγραφή'}\r\n              </button>\r\n                <button\r\n                  className=\"btn btn-warning ml-2\" \r\n                  onClick={(e) => handleSetLogin(e,!isLogin)}\r\n                  disabled={isOffline}>\r\n                Αλλαγή σε { isLogin ? 'Εγγραφή' : 'Σύνδεση'}\r\n                </button>\r\n                {errors.length > 0 && \r\n                  <button className=\"btn btn-primary ml-2\" \r\n                  onClick={(e) => handleClear(e)}>Καθαρισμός</button>\r\n                }\r\n            </div>\r\n          </form>\r\n          { errors.length > 0 && errors.map(error => <div className=\"alert alert-danger mt-3\" role='alert'>{error}</div>)   }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginForm;","import LoginForm from './loginForm';\r\nexport default LoginForm; ","import { useState, useEffect } from 'react';\r\n\r\nexport function useNetwork(){\r\n  const [isOnline, setNetwork] = useState(window.navigator.onLine);\r\n  const updateNetwork = () => {\r\n     setNetwork(window.navigator.onLine);\r\n  };\r\n  useEffect(() => {\r\n     window.addEventListener(\"offline\", updateNetwork);\r\n     window.addEventListener(\"online\", updateNetwork);\r\n     return () => {\r\n        window.removeEventListener(\"offline\", updateNetwork);\r\n        window.removeEventListener(\"online\", updateNetwork);\r\n     };\r\n  });\r\n  return isOnline;\r\n};","import TopBar from './topBar';\r\nexport default TopBar;","import React from 'react';\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { logout, selectIsLoggedIn, selectIsAdmin } from '../../features/store/stateSlice';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport default function TopBar() {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const isLoggedIn = useSelector(selectIsLoggedIn);\r\n  const isAdmin = useSelector(selectIsAdmin);\r\n\r\n  const handleLogout = () => {\r\n    dispatch(logout());\r\n    history.push('/');\r\n  }\r\n\r\n  return (\r\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-white border shadow-sm\">\r\n      <Link className=\"navbar-brand\" to=\"/my-schedule\">My Schedule</Link>\r\n      <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span className=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n        <ul className=\"navbar-nav mr-auto\">\r\n          <li className=\"nav-item active\">\r\n            <Link className=\"nav-link\" href=\"#\" to='/my-schedule'>Αρχική <span className=\"sr-only\">(current)</span></Link>\r\n          </li>\r\n          {isLoggedIn && \r\n            <>\r\n              <li className=\"nav-item\"><Link className=\"nav-link\" to=\"/edit-profile\">Ρυθμίσεις</Link></li>\r\n              <li className=\"nav-item\"><Link className=\"nav-link\" to=\"/edit-selected-lessons\">Επιλεγμένα Μαθήματα</Link></li>\r\n            </>\r\n          }\r\n          {isAdmin &&\r\n            <>\r\n              <li className=\"nav-item\"><Link className=\"nav-link\" to=\"/admin-panel\">Διαχείριση</Link></li>\r\n            </>\r\n          }\r\n        </ul>\r\n      </div>\r\n      {isLoggedIn && <div className=\"my-2 my-lg-0\">\r\n        <button className=\"btn btn-warning my-2 my-sm-0\" onClick={handleLogout} type=\"submit\">Logout</button>\r\n      </div>}\r\n      \r\n  </nav>\r\n  )\r\n}\r\n","export default [\r\n  { label: 'Ονομα', value: 'name', type: 'text' },\r\n  { label: 'Αριθμός Μητρώου', value: 'rn', type: 'text' },\r\n  { label: 'Εξάμηνο', value: 'semester', type: 'text' },\r\n];","import EditProfileForm from './editProfileForm';\r\nexport default EditProfileForm; ","import React, { useState } from 'react';\r\nimport fields from './formFields';\r\nimport { validators } from '../../utils';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { requestProfileEdit, selectLocalId } from '../../features/store/stateSlice'\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport default function EditProfileForm() {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory();\r\n  const [formFields, setFormFields] = useState({name: '', rn: '', semester: ''});\r\n  const localId = useSelector(selectLocalId);\r\n\r\n  const validateField = (field) => {\r\n    return validators[field.name](field.value)\r\n  }\r\n  validateField({name: 'name', value: \"Asf ssdg\"})\r\n\r\n  const handleChange = e => {\r\n    setFormFields({...formFields, [e.target.name]: e.target.value })\r\n  }\r\n\r\n  const handleClick = e => {\r\n    e.preventDefault();\r\n    dispatch(requestProfileEdit({...formFields, localId}))\r\n  }\r\n   \r\n  const validForm = Object.values(formFields).every(field => field !== '')\r\n  return (\r\n    <div className='container'>\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <form>\r\n            {fields.map(({ value, type, label }) =>\r\n              <div className=\"form-group\" key={value}>\r\n                <label htmlFor={value}>{label}</label>\r\n                <input \r\n                  value={formFields[value]}\r\n                  onChange={e => handleChange(e)} \r\n                  className={'form-control'} \r\n                  type={type} \r\n                  name={value} \r\n                  id={value} />\r\n              </div>\r\n            )}\r\n            <button\r\n              disabled={!validForm}\r\n              id={'login'}  \r\n              onClick={e => handleClick(e)} \r\n              className=\"btn btn-primary\">Submit</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { uploadFile } from '../../features/store/stateSlice'\r\n\r\nexport default function AdminPanel() {\r\n\r\n  const [fileToUpload, setFileToUpload] = useState();\r\n  function handleChange(e) {\r\n    debugger;\r\n    setFileToUpload(e.target.files[0]);\r\n  }\r\n  async function handleClick() {\r\n    await uploadFile(fileToUpload);\r\n    alert('File Uploaded');\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <h3>Μεταφόρτωση Προγραμμάτος</h3>\r\n      <input\r\n        type=\"file\"\r\n        name=\"fileUpload\"\r\n        id=\"fileUpload\"\r\n        onChange={handleChange}  \r\n      />\r\n      <button className=\"btn btn-primary\" onClick={handleClick}>Μεταφόρτωση</button> \r\n    </div>\r\n  )\r\n}\r\n","import EditSelectedLessons from './editSelectedLessons';\r\nexport default EditSelectedLessons; ","import React, { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  selectLessonNames,\r\n  updateRegisteredLessonsAsync,\r\n  selectUser,\r\n  selectRegisteredLessons,\r\n} from 'features/store/stateSlice';\r\n\r\nexport default function EditSelectedLessons() {\r\n  const lessonsNames = useSelector(selectLessonNames).slice().sort();\r\n  const registeredLessons = useSelector(selectRegisteredLessons);\r\n  const [usersLessons, setUsersLessons] = useState(registeredLessons);\r\n  const userUuid = useSelector(selectUser).uuid;\r\n  const dispatch = useDispatch();\r\n\r\n  function updateUsersLessons(lessonName) {\r\n    if(usersLessons.includes(lessonName)) {\r\n      setUsersLessons([...usersLessons.filter(item => item !== lessonName)])\r\n    } else {\r\n      setUsersLessons([...usersLessons, lessonName])\r\n    }\r\n  }\r\n  function handleSelectAll() {\r\n    setUsersLessons([...lessonsNames]);\r\n  }\r\n  function handleUnselectAll() {\r\n    setUsersLessons([]);\r\n  }\r\n  function handleClick() {\r\n    dispatch(updateRegisteredLessonsAsync({uuid: userUuid, registeredLessons: usersLessons}));\r\n  }\r\n\r\n  return (\r\n    <div className='container '>\r\n      <div className=\"row d-flex justify-content-center\">\r\n        <div className=\"col-md-12 mt-3 bg-white\">\r\n          <form className=\"p-4\">\r\n            <h3>{\"Διαθέσιμα Μαθήματα\"}</h3>\r\n            <hr/>\r\n            {lessonsNames.map((lessonName, index) => {\r\n              const isChecked = usersLessons.includes(lessonName);\r\n              return (<div key={index} className=\"d-flex flex-column justify-content-center\">\r\n                <div className=\"row d-flex cursor-pointer align-items-center\">\r\n                  <input \r\n                    type=\"checkbox\" \r\n                    value={lessonName}\r\n                    checked={isChecked} \r\n                    onChange={() => updateUsersLessons(lessonName)}\r\n                    className=\"mr-1\"\r\n                  />\r\n                  <div>{lessonName}</div>\r\n                </div>\r\n              </div>)\r\n            })}\r\n          </form>\r\n          <div className=\"justify-content-center\">\r\n            <button\r\n              className=\"btn btn-primary mr-3\"\r\n              onClick={handleClick}\r\n            >{\"Υποβολή\"}</button>\r\n            <button\r\n              className=\"btn btn-success mr-3\"\r\n              onClick={handleSelectAll}\r\n            >{\"Επιλογή Όλων\"}\r\n            </button>\r\n            <button\r\n              className=\"btn btn-warning\"\r\n              onClick={handleUnselectAll}\r\n            >{\"Αποεπιλογή Όλων\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectIsLoggedIn } from './features/store/stateSlice';\r\n\r\nconst PrivateRoute = ({ children, ...rest }) => {\r\n  const isLoggedIn = useSelector(selectIsLoggedIn);\r\n  return (\r\n    <Route \r\n      {...rest} \r\n      render={(props) => (\r\n      isLoggedIn\r\n        ? children\r\n        : <Redirect to='/' />\r\n    )} />\r\n  )\r\n}\r\n\r\nexport default PrivateRoute;","import React, { useEffect } from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n} from \"react-router-dom\";\r\nimport MainView from './components/mainView';\r\nimport Sidebar from './components/sidebar';\r\nimport './App.css';\r\nimport LoginForm from './components/loginForm';\r\nimport TopBar from './components/topBar'\r\nimport EditProfileForm from './components/editProfileForm';\r\nimport {AdminPanel} from './components/adminPanel';\r\nimport EditSelectedLessons from './components/editSelectedLessons';\r\nimport PrivateRoute from './privateRoute';\r\n\r\n// App Entry Point\r\nfunction App() {\r\n  const isMobile = window.matchMedia('(max-width: 450px)').matches;\r\n  return (\r\n    <Router>\r\n      <div className=\"App bg-light container-fluid p-0\" style={{ display: 'flex', flexDirection: 'column' }}>\r\n        <TopBar />\r\n        <div style={{display: 'flex', height: '100%'}}>\r\n          <Route exact path=\"/\">\r\n            <LoginForm />\r\n          </Route>\r\n          <Route exact path='/edit-profile'>\r\n            <EditProfileForm />\r\n          </Route>\r\n          <PrivateRoute exact path='/edit-selected-lessons'>\r\n            <EditSelectedLessons />\r\n          </PrivateRoute>\r\n          <PrivateRoute exact path='/admin-panel'>\r\n            <AdminPanel />\r\n          </PrivateRoute>\r\n          <PrivateRoute exact path='/my-schedule'>\r\n            {!isMobile && <Sidebar />}\r\n            <MainView />\r\n          </PrivateRoute>\r\n        </div>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport stateReducer from '../features/store/stateSlice';\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    state: stateReducer,\r\n  },\r\n});\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport store from './app/store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}